<!DOCTYPE html>
<html>

<head>
    <title>canvas中事件绑定</title>
    <style>
    </style>
</head>

<body>
    <canvas id="can" width=500px; height=500px; style="position:relative;left:40%;top:100px;"></canvas>

    <!--<img id="img" src="IMG_20170425_164207.jpg" height=100px width=100px>-->
    <script>
        var args = [
            { begin: 0, end: 0.8 * Math.PI, color: 'red', count: 0 },
            { begin: 0.8 * Math.PI, end: 1.5 * Math.PI, color: 'blue', count: 0 },
            { begin: 1.5 * Math.PI, end: 2 * Math.PI, color: 'black', count: 0 }
        ]
        function draw() {
            var can = document.getElementById("can");
            var ctx = can.getContext("2d");
            //绘制圆饼图
            redraw(ctx);
            can.addEventListener("click", function (e) {
                redraw(ctx);
                let isDone = false;
                for (let i = 0; i < args.length; i++) {
                    ctx.beginPath();
                    ctx.moveTo(250, 250);
                    ctx.arc(250, 250, 205, args[i].begin, args[i].end);
                    if (ctx.isPointInPath(e.offsetX, e.offsetY)) {
                        if (args[i].count === 0) {
                            ctx.shadowBlur = 30;
                            ctx.shadowColor = 'black';
                            ctx.fillStyle = args[i].color;
                            ctx.fill();
                            ++args[i].count;
                        } else {
                            args[i].count = 0;
                        }
                    }
                }

            }, false);
        }
        function redraw(ctx) {
            ctx.shadowBlur = 0;
            ctx.shadowColor = 'none';
            ctx.clearRect(0, 0, 500, 500);
            for (let i = 0; i < args.length; i++) {
                ctx.beginPath();
                ctx.moveTo(250, 250);
                ctx.arc(250, 250, 200, args[i].begin, args[i].end);
                ctx.fillStyle = args[i].color;
                ctx.fill();
            }
        }
        draw();
    </script>
</body>

</html>
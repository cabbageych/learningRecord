<!DOCTYPE html>
<html>

<head>
    <title>dataTransfer</title>
    <style>
        body {
            text-align: center;
        }

        #head {
            position: relative;
            height: 100px;
            width: 100%;
            background: lightblue;
        }

        #test01 {
            position: relative;
            height: 300px;
            width: 300px;
            background: lightgoldenrodyellow;
        }

        #test02 {
            position: relative;
            height: 300px;
            width: 300px;
            background: lightgoldenrodyellow;
        }

        #tail {
            position: relative;
            height: 100px;
            width: 100%;
            background: lightcoral;
        }
    </style>
</head>

<body>
    <div id="head"></div>
    <div id="container">
        <div id="test01">
            <p id="drag01" draggable="true">message form div01!</p>
        </div>
        <!--元素设置draggable为true后拖动动画生效-->
        <div id="test02">
            <p id="drag02" draggable="true">message from div02!</p>
        </div>
    </div>
    <div id="tail"></div>
    <script>
        //dataTransfer中的setData和getData配合实现数据拖动
        var test01 = document.getElementById("test01");
        var test02 = document.getElementById("test02");
        test01.ondragstart = start;
        test02.ondragstart = start;
        test01.ondragenter = enter;
        test02.ondragenter = enter;
        test01.ondragover = over;
        test02.ondragover = over;
        test02.ondragleave = leave;
        test01.ondragleave = leave;
        test01.ondrop = drop;
        test02.ondrop = drop;

        function start(e){
            e.dataTransfer.setData('id',e.target.id);
            //console.log(e.target.id);
        }

        //取消enter和over的默认行为：拒绝添加任何拖动元素
        function enter(e){
            e.preventDefault();
        }

        function over(e){
            e.preventDefault();
        }

        function leave(e){
            e.preventDefault();
            //let temp = e.dataTransfer.getData("id");
            //console.log(temp);
        }
        function drop(e){
            e.preventDefault();
            e.stopPropagation();
            let temp = e.dataTransfer.getData("id");
            if(temp){
                e.target.appendChild(document.getElementById(temp));
            }
            console.log(temp);
        }
    </script>
</body>

</html>
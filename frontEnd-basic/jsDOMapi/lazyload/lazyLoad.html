<!DOCTYPE html>
<html>

<head>
    <title>lazyLoad</title>
    <style>
        div {
            margin: 0 auto;
            height: 500px;
            width: 500px;
        }

        img {
            height: 500px;
            width: 500px;
        }
    </style>
</head>

<body>
    <div><img src="../canvas/IMG_20170425_164207.jpg" data-src="./01.jpg"></div>
    <div><img src="../canvas/IMG_20170425_164207.jpg" data-src="./02.jpg"></div>
    <div><img src="../canvas/IMG_20170425_164207.jpg" data-src="./03.jpg"></div>
    <div><img src="../canvas/IMG_20170425_164207.jpg" data-src="./04.jpg"></div>

    <script>
        var img = document.getElementsByTagName("img");
        var num = img.length;
        var currentImg = 0;

        lazyLoad();
        
        
        function start(func) {
            let time01 = new Date();
            var timer;
            return function () {
                clearTimeout(timer);
                let time02 = new Date();
                console.log(time02-time01);
                if (time02 - time01 > 500) {
                    timer = setTimeout(func,0);
                    time01 = time02;
                } 
            };
        };

        function lazyLoad(event) {
            var seeHeight = document.documentElement.clientHeight; //可见区域高度
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;  //滚动条距离顶部高度
            for (let i = currentImg; i < num; i++) {
                if (img[i].offsetTop < seeHeight + scrollTop) {
                    img[i].src = img[i].getAttribute("data-src");
                    ++currentImg;
                }
            }
            for (let i of img) {
                console.log(i.src);
            }
        }

        window.addEventListener('scroll',start(lazyLoad));
    </script>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
    <title>onerror</title>
</head>

<body>
    <script>
        /**
         1、message {String} 错误信息。直观的错误描述信息，不过有时候你确实无法从这里面看出端倪，特别是压缩后脚本的报错信息，可能让你更加疑惑。
         2、url {String} 发生错误对应的脚本路径，比如是你的http://a.js报错了还是http://b.js报错了。
         3、lineNo {Number} 错误发生的行号。
         4、columnNo {Number} 错误发生的列号。
         5、error {Object} 具体的 error 对象，包含更加详细的错误调用堆栈信息，这对于定位错误非常有帮助。
         */
        window.onerror = function (message, url, lineNo, columnNo, error) {
            fetch("http://localhost:8080", {
                method: 'POST',
                body: JSON.stringify({ message: message, url: url, lineNo: lineNo, 'columnNo': columnNo, error: error })
            }).then(response=>{
                if(response.status == 200){
                    return response.text();
                }else{
                    return response.statusText;
                }
            }).then(val=>{
                console.log(val);
            });
            
        }
        console.log(a);
    </script>
</body>

</html>
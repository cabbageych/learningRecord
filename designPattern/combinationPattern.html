<!DOCTYPE <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>组合模式</title>
</head>

<body>
    <script>
        /*********
        组合模式（Composite）将对象组合成树形结构以表示“部分-整体”的层次结构，
        组合模式使得用户对单个对象和组合对象的使用具有一致性。
        ****************/
        //以文件夹为例
        //定义根对象
        var folder = function(name){
            this.name = name;
            this.files = [];
        }
        folder.prototype.add = function(file){
            this.files.push(file);
        }
        folder.prototype.scan = function(){
            for(var i = 0;i<this.files.length;i++){
                this.files[i].scan();
            }
        }
        //定义叶子对象
        var file = function(name,content){
            this.name = name;
            this.content = content;
        }
        file.prototype.add = function(){
            throw new Error("文件下面不能再添加文件！");
        }
        file.prototype.scan = function(){
            console.log("文件名："+this.name);
            console.log("内容："+this.content);
        }

        //实例话测试
        var root = new folder("cabbage");
        root.add(new file("file01","xixihaha!!!"));
        root.add(new file("file02","cabbage"));
        root.scan();
        (new file("file03","emmmm")).add();
    </script>
</body>

</html>